PROJECT_GUIDE.md를 최우선 기준으로 작업해 주세요.
대답, 코드 안의 메세지/주석은 항상 한국어로 하세요.
모든 코딩은 UTF-8 형식으로 저장합니다.



# PROJECT GUIDE

- 이 문서는 이 프로젝트의 **유일한 개발·리팩토링 기준(Source of Truth)** 이다.  
- 사람과 AI 모두 본 문서를 최우선으로 따른다.



## 1. 절대 원칙 (위반 금지)

- 기능 변경 없이 작업한다
- 동작 결과는 기존과 100% 동일해야 한다
- 리팩토링은 **가독성·유지보수성 개선 목적만 허용**
- 기준을 초과할 경우, 코드 작성 전에 분리부터 수행한다
- 파일 최대 길이를 초과할 경우, 해당 파일의 기존 모듈 중 분리 가능한 부분을 새로운 파일로 작성한다


## 2. 코드 스타일 규칙

### 2-1. 라인 / 함수 제한

| 항목           | 기준                  |
|----------------|-----------------------|
| 한 줄 최대 길이 | 100자                 |
| 함수 최대 길이  | 40줄                  |
| 파일 책임       | 파일 하나당 책임 1개   |
| 파일 최대 길이  | 1000줄                |


### 2-2. 조건문 / 흐름 제어

- 중첩 if 최대 2단계
- 가능하면 **조기 return 패턴** 사용
- 삼항 연산자 중첩 금지



### 2-3. 메서드 체이닝 규칙

- 메서드 체이닝 최대 3단계
- null 가능성이 있는 객체에 체이닝 사용 금지
- 체이닝이 길어질 경우 단계별 변수로 분리

#### 2-3-1. 금지 예시:
- ```js
- user.getA().getB().getC().getD();

#### 2-3-2. 허용 예시:
- const a = user.getA();
- const b = a.getB();
- const c = b.getC();



## 3. 구조 규칙 (계층별 책임)

계층            책임
config          환경·설정 값
constants       상수 / enum
utils           순수 함수, 공통 로직
repository      DB 접근만
service     	비즈니스 로직만
controller      요청 / 응답 처리
route	        URL, 메서드 정의
public	        UI, 이벤트 처리

### 3-1. 추가 규칙

- 비즈니스 로직은 service 외 작성 금지
- DB 접근은 repository 외 작성 금지
- 이벤트 핸들러 내부에 로직 작성 금지



## 4. 파일 및 인터페이스 규칙

- 외부에서 호출되는 함수명 변경 금지
- 함수 시그니처 변경 금지
- import / export 구조 유지
- 매직 넘버는 상수로 분리
- 의미 없는 변수명 금지 (a, tmp, data1 등)
- 파일은 라인이 길어지지 않도록 기능별, 유형별로 분리해서 작성
- 상수화, 공통 에러 처리, 비동기 스타일 통일
- 패스워드 해시 방식은 bcrypt로 구성
- 인라인/내장 스타일은 CSS 파일로 분리
- 모달은 JS로만 제어



## 5. 리팩토링 작업 방식 (필수 절차)

### 5-1. 작업 단위

- 파일 단위 작업 원칙
- 프로젝트 전체를 한 번에 수정 금지
- 공통 파일(config, constants)은 묶어서 처리 가능

### 5-2. 권장 리팩토링 순서

- config / constants
- utils / helpers
- repository
- service
- controller
- route
- app 진입점
- UI / public



## 6. AI 작업 지시 규약 (중요)

- 모든 답변과 코드는 PROJECT_GUIDE.md를 기준으로 판단한다
- 가이드와 충돌하는 판단은 금지한다
- 수정 전, 가이드 위반 여부를 먼저 점검
- 결과에는 변경 요약을 반드시 포함한다



## 7. 금지 사항

- 리팩토링 명목의 구조 변경
- 불필요한 추상화
- 사용되지 않는 유틸 함수 생성
- “나중에 정리” 전제 코드 작성
- 하드코딩, 절대경로 금지



## 8. 핵심 요약

- 리팩토링은 사후 작업이 아니다.
- 처음부터 리팩토링이 필요 없는 코드를 작성하는 것이 목표다.
- 이 문서를 위반하는 코드는 승인되지 않는다.



## 9. CSS 분리 방식

- 한 속성당 한 줄 유지, 여러 속성을 background처럼 섞어 쓰지 말고 background-image/size/repeat/position처럼 나눔
- 긴 값(data URI 등)은 가능하면 텍스트 아이콘/심플 CSS로 대체하거나 별도 리소스로 분리
- 선택자 체인은 줄바꿈으로 논리 단위 구분(콤마 단위)
- 공통 색상/길이 값은 CSS 변수로 올려 중복 제거
- 주석은 짧게, 섹션 단위로 배치해 탐색 용이하게 유지